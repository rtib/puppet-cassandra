<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Defined Type: cassandra::jvm_option_set
  
    &mdash; Documentation by YARD 0.9.25
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "puppet_defined_types::cassandra::jvm_option_set";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../puppet_defined_type_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (c)</a> &raquo;
    <span class='title'><span class='object_link'>Defined Types</span></span>
     &raquo; 
    <span class="title">cassandra::jvm_option_set</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="../puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Defined Type: cassandra::jvm_option_set</h1>
<div class="box_info">
  <dl>
    <dt>Defined in:</dt>
    <dd>
      manifests/jvm_option_set.pp
    </dd>
  </dl>
</div>

  <h2>Summary</h2>
  Set JVM options by controlling particular lines of jvm.options file.

<h2>Overview</h2>
<div class="docstring">
  <div class="discussion">
    
<p>Select the file to be controlled by choosing, jvm, jvm8 or jvm11 and the
variant server or clients. Options, properties and advanced runtime options
can be defined to have particular values or to be removed from the
configuration. Any option not mentioned will not be touched.</p>

<p>For Cassandra 3.x versions, only <code>optsfile = jvm</code> with
<code>variant = undef</code> is supported, which will control the
<code>/etc/cassandra/jvm.options</code> file. Since Cassandra versions
&gt;= 4.0 use distinct option files for server and clients, as well as Java
independent, Java-8 and Java-11, use parameters <code>optsfile</code> and
<code>variant</code> to select a particular options file.</p>

  </div>
</div>


<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>optsfile</span>
      
      
        <span class='type'>(<tt>Enum['jvm', 'jvm8', 'jvm11']</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;jvm&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>determine the file to control, either <code>jvm</code> for the independet
options or <code>jvm8</code> or <code>jvm11</code> for the version
dependant options</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>variant</span>
      
      
        <span class='type'>(<tt>Optional[Enum['clients', 'server']]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>leave this undef for Cassandra &lt; 4.0, set it to <code>server</code> or
<code>clients</code> if running &gt;= 4.0</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Array[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>list of basic JVM options, e.g. <code>ea</code>, <code>server</code>,
<code>Xms4g</code>, etc.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>properties</span>
      
      
        <span class='type'>(<tt>Hash[String,Optional[Scalar]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>java properties to be passed to the JVM</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sizeoptions</span>
      
      
        <span class='type'>(<tt>Hash[String,Optional[Scalar]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>JVM options having a value concatenated directly to the options, e.g.
<code>Xmx4g</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>advancedoptions</span>
      
      
        <span class='type'>(<tt>Hash[String,Optional[Scalar]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>advanced runtime options which may be feature toggles or values</p>
</div>
      
    </li>
  
</ul>



</div><div class="method_details_list">
  <table class="source_code">
    <tr>
      <td>
        <pre class="lines">


26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122</pre>
      </td>
      <td>
        <pre class="code"><span class="info file"># File 'manifests/jvm_option_set.pp', line 26</span>

define cassandra::jvm_option_set (
  Enum[&#39;jvm&#39;, &#39;jvm8&#39;, &#39;jvm11&#39;]        $optsfile = &#39;jvm&#39;,
  Optional[Enum[&#39;clients&#39;, &#39;server&#39;]] $variant = undef,
  Array[String]                       $options = [],
  Hash[String,Optional[Scalar]]       $properties = {},
  Hash[String,Optional[Scalar]]       $sizeoptions = {},
  Hash[String,Optional[Scalar]]       $advancedoptions = {},
) {
  $_file = $variant ? {
    /^(server|clients)$/ =&gt; &quot;${cassandra::config_dir}/${optsfile}-${variant}.options&quot;,
    default              =&gt; &quot;${cassandra::config_dir}/${optsfile}.options&quot;,
  }

  $options.each |String $_opt| {
    if $_opt =~ /^~/ {
      $_value = $_opt[1,-1]
      file_line { &quot;${name} remove option ${_value}&quot;:
        ensure =&gt; absent,
        path   =&gt; $_file,
        line   =&gt; &quot;-${_value}&quot;,
      }
    } else {
      file_line { &quot;${name} set option ${_opt}&quot;:
        ensure =&gt; present,
        path   =&gt; $_file,
        line   =&gt; &quot;-${_opt}&quot;,
      }
    }
  } # $options.each

  $sizeoptions.each |String $_prop, Data $_value| {
    if $_value =~ Undef {
      file_line { &quot;${name} remove size option ${_prop}&quot;:
        ensure            =&gt; absent,
        path              =&gt; $_file,
        match             =&gt; &quot;^-${_prop}&quot;,
        match_for_absence =&gt; true,
      }
    } else {
      file_line { &quot;${name} set size option ${_prop}&quot;:
        ensure =&gt; present,
        path   =&gt; $_file,
        match  =&gt; &quot;^-${_prop}&quot;,
        line   =&gt; &quot;-${_prop}${_value}&quot;,
      }
    }
  } # $sizeoptions.each

  $properties.each |String $_prop, Data $_value| {
    if $_value =~ Undef {
      file_line { &quot;${name} remove property ${_prop}&quot;:
        ensure            =&gt; absent,
        path              =&gt; $_file,
        match             =&gt; &quot;^-D${_prop}&quot;,
        match_for_absence =&gt; true,
      }
    } else {
      file_line { &quot;${name} set property ${_prop}&quot;:
        ensure =&gt; present,
        path   =&gt; $_file,
        match  =&gt; &quot;^-D${_prop}&quot;,
        line   =&gt; &quot;-D${_prop}=${_value}&quot;,
      }
    }
  } # $properties.each

  $advancedoptions.each |String $_aopt, Data $_value| {
    if $_value =~ Undef {
      file_line { &quot;${name} remove advanced runtime option ${_aopt}&quot;:
        ensure            =&gt; absent,
        path              =&gt; $_file,
        match             =&gt; &quot;^-XX:[+-]?${_aopt}&quot;,
        match_for_absence =&gt; true,
      }
    } else {
      if $_value =~ Boolean {
        $_pre = $_value ? {
          true    =&gt; &#39;+&#39;,
          default =&gt; &#39;-&#39;,
        }
        file_line { &quot;${name} set boolean advanced runtime option ${_aopt}&quot;:
          ensure =&gt; present,
          path   =&gt; $_file,
          match  =&gt; &quot;^-XX:[+-]${_aopt}&quot;,
          line   =&gt; &quot;-XX:${_pre}${_aopt}&quot;,
        }
      } else {
        file_line { &quot;${name} set advanced runtime option ${_aopt}&quot;:
          ensure =&gt; present,
          path   =&gt; $_file,
          match  =&gt; &quot;^-XX:${_aopt}&quot;,
          line   =&gt; &quot;-XX:${_aopt}=${_value}&quot;,
        }
      }
    }
  }
}</pre>
      </td>
    </tr>
  </table>
</div>
</div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>